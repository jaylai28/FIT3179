{
 "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
 "width": 800,
 "height": 500,
 "title": "COVID-19 Cases per Country (13 Oct 2020)",
 "data": {
 "url": "https://raw.githubusercontent.com/wlai0013/FIT3179/master/Assignment2/data/UnemploymentRateByStates.csv"
 },
 "transform": [
   {"filter": "datum.Population > Population_Above"},
   {"filter": "year_selection == null || datum.Year == year_selection"}
],
 "params": [
   
 {
 "name": "Population_Above",
 "value": 0,
 "bind": {
 "input": "range",
 "min": 500000,
 "max": 25000000,
 "step": 500000,
 "name": "Minimum Population: "
 }
 },
 {
 "name": "year_selection",
 "bind": {
 "input": "select",
 "options": [
   "null",
 "2014",
 "2015",
 "2016",
 "2017",
 "2018",
 "2019"

 ],
 "labels":[
   "Select All",
 "2014",
 "2015",
 "2016",
 "2017",
 "2018",
 "2019"
 ],

"name": "Year Selection: "
 }
 }
 ],


 "selection": {
 "year_highlight": {
 "type": "multi",
 "fields": ["Year"],
 "bind": "legend"
 }
 },
 "mark": "circle",
 "encoding": {
 "x": {
 "field": "State",
 "type": "nominal",
 "title": "State",
 "axis": {"tickCount": 7}
 },
 "y": {
 "field": "UnemploymentRates",
 "type": "quantitative",
 "title": "Unemployment Rates",
 "axis": {"tickCount": 7},
 "scale": {"type": "log", "domain": [1, 10]
 }
}, 
  "opacity": {
 "condition": {"selection": "year_highlight", "value": 1},
 "value": 0.2
 },
 "size": {
 "field": "Population",
 "type": "quantitative",
 "scale": {
 "type": "threshold",
 "domain": [2000000, 5000000, 10000000, 15000000, 25000000]
 },
 "legend": {"format": ".1s"}
 }
 
 ,

 "tooltip": [
 {"field": "State", "type": "nominal"},
  {"field": "Population", "type": "quantitative"},
    {"field": "Year", "type": "nominal"},
 {"field": "UnemploymentRates", "type": "quantitative", "format": ","}

 ]
 }
}
